function atvImg(){function w(a,b,c,d,e,f,g,h,i){cancelAnimationFrame(c.__STEP),c.__STEP=requestAnimationFrame(x.bind(this,a,b,c,d,e,f,g,h,i))}function x(a,b,e,f,g,h,i,j,k){var l=c.scrollTop||d.scrollTop,m=c.scrollLeft,n=b?a.touches[0].pageX:a.pageX,o=b?a.touches[0].pageY:a.pageY,p=e.getBoundingClientRect(),q=320/g,r=.52-(n-p.left-m)/g,s=.52-(o-p.top-l)/h,t=o-p.top-l-h/2,u=n-p.left-m-g/2,v=(r-u)*(.07*q),w=(t-s)*(.1*q),x="rotateX("+w+"deg) rotateY("+v+"deg)",y=Math.atan2(t,u),z=180*y/Math.PI-90;z<0&&(z+=360),f.className.indexOf(" over")!=-1&&(x+=" scale3d(1.07,1.07,1.07)"),f.style.transform=x,k.style.background="linear-gradient("+z+"deg, rgba(255,255,255,"+(o-p.top-l)/h*.4+") 0%,rgba(255,255,255,0) 80%)",k.style.transform="translateX("+r*j-.1+"px) translateY("+s*j-.1+"px)";for(var A=j,B=1.5,C=0;C<j;C++)i[C].style.transform="translateX("+r*A*(C*B/q)+"px) translateY("+s*j*(C*B/q)+"px)",A--}function y(a,b,c){c.className+=" over"}function z(a,b,c,d,e,f){cancelAnimationFrame(b.__STEP),b.__STEP=requestAnimationFrame(A.bind(this,a,b,c,d,e,f))}function A(a,b,c,d,e,f){c.className=c.className.replace(" over",""),c.style.transform="",f.style.cssText="";for(var g=0;g<e;g++)d[g].style.transform=""}for(var f,a=document,c=(a.documentElement,a.getElementsByTagName("body")[0]),d=a.getElementsByTagName("html")[0],e=window,g=a.querySelectorAll(".atvImg"),h=("ontouchstart"in e||navigator.msMaxTouchPoints),i=0;f=g[i];i++){var j=f.querySelectorAll(".atvImg-layer"),k=j.length,l=f.clientWidth||f.offsetWidth||f.scrollWidth,m=f.clientHeight||f.offsetHeight||f.scrollHeight;if(!(k<=0)){var n=a.createElement("div"),o=a.createElement("div"),p=a.createElement("div"),q=a.createElement("div"),r=[];f.id="atvImg__"+i,n.className="atvImg-container",o.className="atvImg-shine",p.className="atvImg-shadow",q.className="atvImg-layers";for(var s=0;s<k;s++){var t=j[s].cloneNode(!0),u=j[s].getAttribute("data-img");t.className=t.className.replace("atvImg-","atvImg-rendered-"),t.setAttribute("data-layer",s),u&&(t.style.backgroundImage="url("+u+")"),t.style.width=t.style.height=100+3*s+"%",t.style.left=t.style.top="-"+1.5*s+"%",q.appendChild(t),r.push(t)}for(var v;v=f.firstChild;)f.removeChild(v);n.appendChild(p),n.appendChild(q),n.appendChild(o),f.appendChild(n),f.style.transform="perspective("+3*l+"px)",f.__STEP=0,h?(e.preventScroll=!1,function(a,b,c,d,g,h,i){f.addEventListener("touchmove",function(f){e.preventScroll&&f.preventDefault(),w(f,!0,a,b,c,d,g,h,i)}),f.addEventListener("touchstart",function(c){e.preventScroll=!0,y(c,a,b)}),f.addEventListener("touchend",function(c){e.preventScroll=!1,z(c,a,b,g,h,i)})}(f,n,l,m,r,k,o)):!function(a,b,c,d,e,g,h){f.addEventListener("mousemove",function(f){w(f,!1,a,b,c,d,e,g,h)}),f.addEventListener("mouseenter",function(c){y(c,a,b)}),f.addEventListener("mouseleave",function(c){z(c,a,b,e,g,h)})}(f,n,l,m,r,k,o)}}}!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();